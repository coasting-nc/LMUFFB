
Test: Regression - Road Texture Toggle Spike
[WARNING] Invalid DeltaTime (<=0). Using default 0.0025s.
[WARNING] Missing Grip. Using Approx based on Slip Angle.
[WARNING] Missing Grip. Using Approx based on Slip Angle.
[PASS] No spike on enable. Force: 0.005

Test: Regression - Bottoming Method Switch Spike
[PASS] No spike on method switch.

Test: Regression - Rear Torque LPF Continuity
[PASS] LPF was running in background. Force: -0.3

Test: Stress Stability (Fuzzing)
[WARNING] Missing Grip. Using Approx based on Slip Angle.
[WARNING] Missing Grip. Using Approx based on Slip Angle.
[WARNING] Missing Tire Load. Using Approximation.
[PASS] Survived 1000 iterations of random input.

Test: Manual Slip Singularity (Low Speed Trap)
[PASS] Low speed lockup suppressed (Phase 0).

Test: Scrub Drag Fade-In
[WARNING] Invalid DeltaTime (<=0). Using default 0.0025s.
[PASS] Scrub drag faded correctly (50%).

Test: Road Texture Teleport (Delta Clamp)
[WARNING] Invalid DeltaTime (<=0). Using default 0.0025s.
[WARNING] Missing Grip. Using Approx based on Slip Angle.
[WARNING] Missing Grip. Using Approx based on Slip Angle.
[PASS] Teleport spike clamped.

Test: Grip Approximation Low Speed Cutoff
[WARNING] Invalid DeltaTime (<=0). Using default 0.0025s.
[WARNING] Missing Grip. Using Approx based on Slip Angle.
[WARNING] Missing Grip. Using Approx based on Slip Angle.
[FAIL] Low speed grip not forced. Got 0.2 Expected 1.0.

Test: SoP Yaw Kick (v0.4.18 Smoothed)
[WARNING] Invalid DeltaTime (<=0). Using default 0.0025s.
[PASS] Yaw Kick first frame smoothed correctly (-0.025 Ôëê -0.025).

Test: Zero Input
[WARNING] Invalid DeltaTime (<=0). Using default 0.0025s.
[PASS] force approx 0.0

Test: Suspension Bottoming (Fix Verification)
[WARNING] Missing Grip. Using Approx based on Slip Angle.
[WARNING] Missing Grip. Using Approx based on Slip Angle.
[WARNING] Missing Grip. Using Approx based on Slip Angle.
[WARNING] Missing Grip. Using Approx based on Slip Angle.
[PASS] Bottoming effect active. Force: 0.05

Test: Grip Modulation (Understeer)
[WARNING] Invalid DeltaTime (<=0). Using default 0.0025s.
[FAIL] force_full (0.1) != 0.5 (0.5)
[FAIL] force_half (0.09) != 0.25 (0.25)

Test: SoP Effect
[WARNING] Invalid DeltaTime (<=0). Using default 0.0025s.
[PASS] force approx 0.125

Test: Min Force
[WARNING] Invalid DeltaTime (<=0). Using default 0.0025s.
[PASS] force approx 0.10

Test: Progressive Lockup
[PASS] std::abs(force_low) > 0.00001
[PASS] engine.m_lockup_phase != 0.0
[PASS] Progressive Lockup calculated.

Test: Slide Texture (Front & Rear)
[WARNING] Missing Grip. Using Approx based on Slip Angle.
[WARNING] Missing Grip. Using Approx based on Slip Angle.
[PASS] Front slip triggers Slide Texture (Force: 0.0492)
[WARNING] Missing Grip. Using Approx based on Slip Angle.
[WARNING] Missing Grip. Using Approx based on Slip Angle.
[PASS] Rear slip triggers Slide Texture (Force: -0.296087)

Test: Dynamic Tuning (GUI Simulation)
[WARNING] Invalid DeltaTime (<=0). Using default 0.0025s.
[FAIL] force_initial (0.1) != 0.5 (0.5)
[FAIL] force_boosted (0.36) != 1.0 (1)
[FAIL] force_grip_loss (0.122) != 0.25 (0.25)
[PASS] Dynamic Tuning verified.

Test: Lateral G Boost (Slide)
[WARNING] Invalid DeltaTime (<=0). Using default 0.0025s.
[PASS] force approx 1.0

Test: Phase Wraparound (Anti-Click)
[WARNING] Missing Tire Load. Using Approximation.
[WARNING] Missing Grip. Using Approx based on Slip Angle.
[WARNING] Missing Grip. Using Approx based on Slip Angle.
[PASS] Phase wrapped 40 times without discontinuity.

Test: Road Texture State Persistence
[WARNING] Invalid DeltaTime (<=0). Using default 0.0025s.
[WARNING] Missing Grip. Using Approx based on Slip Angle.
[WARNING] Missing Grip. Using Approx based on Slip Angle.
[PASS] force2 approx force1
[PASS] Road texture state preserved correctly.

Test: Multi-Effect Interaction (Lockup + Spin)
[PASS] Multiple effects coexist without interference.

Test: Load Factor Edge Cases
[PASS] force_airborne approx 0.0
[WARNING] Missing Grip. Using Approx based on Slip Angle.
[WARNING] Missing Grip. Using Approx based on Slip Angle.
[PASS] Load factor clamped correctly.

Test: Spin Torque Drop with SoP
[WARNING] Invalid DeltaTime (<=0). Using default 0.0025s.
[PASS] Spin torque drop modifies total force.

Test: Rear Grip Fallback (v0.4.5)
[WARNING] Invalid DeltaTime (<=0). Using default 0.0025s.
[WARNING] Missing Grip. Using Approx based on Slip Angle.
[PASS] Rear grip approximation triggered.
[PASS] Lateral G Boost (Slide) correctly suppressed (Rear Grip restored).

Test: Telemetry Sanity Checks
[WARNING] Missing Tire Load. Using Approximation.
[WARNING] Missing Grip. Using Approx based on Slip Angle.
[WARNING] Missing Grip. Using Approx based on Slip Angle.
[PASS] Detected missing load warning.
[PASS] Load fallback applied (Force generated: -0.0104075)
[PASS] Detected missing grip warning.
[FAIL] force_grip (0.05) != 0.1 (0.1)
[PASS] Diagnostics confirm front approximation.
[PASS] engine.m_grip_diag.front_original approx 0.0
[WARNING] Invalid DeltaTime (<=0). Using default 0.0025s.
[PASS] Detected bad DeltaTime warning.

Test: Hysteresis Logic (Missing Data)
[WARNING] Missing Grip. Using Approx based on Slip Angle.
[WARNING] Missing Grip. Using Approx based on Slip Angle.
[PASS] engine.m_missing_load_frames == 0
[PASS] Hysteresis counter incrementing (5).
[WARNING] Missing Tire Load. Using Approximation.
[PASS] Hysteresis counter incrementing (25).
[PASS] Hysteresis triggered fallback (Warning set).
[PASS] Hysteresis counter decrementing on recovery.

Test: Configuration Presets
[Config] Applied preset: Test: SoP Only
[PASS] Preset applied correctly (Gain=1, SoP=0.08)

Test: Config Save/Load Persistence
[Config] Saved to test_config.ini
[Config] Loaded from test_config.ini
[PASS] engine_load.m_gain approx 1.23f
[PASS] engine_load.m_sop_effect approx 0.45f
[PASS] engine_load.m_road_texture_gain approx 1.5f
[PASS] Boolean persistence.

Test: Channel Stats Logic
[PASS] stats.session_min approx 10.0
[PASS] stats.session_max approx 30.0
[PASS] stats.Avg() approx 20.0
[PASS] Interval Stats Reset.
[PASS] stats.session_min approx 10.0
[PASS] stats.session_max approx 30.0
[PASS] stats.Avg() approx 0.0

Test: Game State Logic (Mock)
[PASS] Player missing -> False.
[PASS] InRealtime=False -> False.
[PASS] InRealtime=True -> True.

Test: SoP Smoothing Step Response
[FAIL] Smoothing Step 1 mismatch. Got 0
[FAIL] Smoothing did not settle. Value: 0

Test: Manual Slip Calculation
[FAIL] Manual Slip 0 -> Lockup? Phase: 0.753982
[FAIL] Manual Slip -1.0 -> No Lockup. Force: -0

Test: Universal Bottoming
[FAIL] Bottoming Method A Failed. Force: 0
[FAIL] Bottoming Method B Failed. Force: -0

Test: Preset Initialization (v0.4.5 Regression)
[PASS] Default (T300): v0.4.5 fields initialized correctly
[PASS] T300: v0.4.5 fields initialized correctly
[FAIL] Test: Game Base FFB Only: scrub_drag_gain = 0.965217, expected 0
[FAIL] Test: SoP Only: scrub_drag_gain = 0.965217, expected 0
[FAIL] Test: Understeer Only: scrub_drag_gain = 0.965217, expected 0
[FAIL] Test: Textures Only: scrub_drag_gain = 0.965217, expected 0
[FAIL] Test: Rear Align Torque Only: scrub_drag_gain = 0.965217, expected 0
[FAIL] Test: SoP Base Only: scrub_drag_gain = 0.965217, expected 0
[FAIL] Test: Slide Texture Only: scrub_drag_gain = 0.965217, expected 0
[FAIL] Some presets have incorrect v0.4.5 field initialization

Test: Snapshot Data Integrity (v0.4.7)
[WARNING] Missing Tire Load. Using Approximation.
[WARNING] Missing Grip. Using Approx based on Slip Angle.
[WARNING] Missing Grip. Using Approx based on Slip Angle.
[PASS] Raw Front Tire Load captured as 0.0.
[PASS] Calculated Front Load is 1300.0.
[PASS] Raw Throttle captured.
[PASS] Raw Ride Height captured (Min).
[PASS] Calc Front Grip is 1.0.
[PASS] Calc Rear Grip is 0.5.
[PASS] raw_front_deflection captured (Renamed field).

Test: Snapshot Data v0.4.9 (Rear Physics)
[PASS] raw_front_long_patch_vel correct.
[PASS] raw_rear_lat_patch_vel correct.
[PASS] raw_rear_long_patch_vel correct.
[PASS] raw_rear_slip_angle correct.

Test: Rear Force Workaround (v0.4.10)
[WARNING] Missing Grip. Using Approx based on Slip Angle.
[FAIL] Rear torque outside expected range. Value: -6 Nm (expected ~-24.25 Nm +/-1)

Test: Rear Align Effect Decoupling (v0.4.11)
[WARNING] Invalid DeltaTime (<=0). Using default 0.0025s.
[WARNING] Missing Grip. Using Approx based on Slip Angle.
[PASS] Rear Force Workaround active. Value: -0.368859 Nm
[FAIL] Rear Align Effect failed. Value: -8.0843 (Expected ~-17.3)

Test: Kinematic Load Braking (+Z Accel)
[WARNING] Missing Tire Load. Using Approximation.
[WARNING] Missing Grip. Using Approx based on Slip Angle.
[WARNING] Missing Grip. Using Approx based on Slip Angle.
[PASS] Front Load Increased under Braking (Approx 4516.71 N)

Test: Combined Friction Circle
[WARNING] Missing Grip. Using Approx based on Slip Angle.
[WARNING] Missing Grip. Using Approx based on Slip Angle.
[PASS] Grip dropped due to Longitudinal Slip (0.2)

Test: SoP Yaw Kick Direction (v0.4.20)
[WARNING] Invalid DeltaTime (<=0). Using default 0.0025s.
[PASS] Yaw Kick provides counter-steer (Negative Force: -0.381311)

Test: Zero Effects Leakage (No Ghost Forces)
[PASS] Zero leakage verified (Force = 0.0).

Test: Base Force Modes & Gain (v0.4.13)
[WARNING] Invalid DeltaTime (<=0). Using default 0.0025s.
[FAIL] Native Mode: Got 0.05 Expected 0.25.
[PASS] Synthetic Mode: Constant force applied (0.5).
[FAIL] Synthetic Mode: Deadzone failed.
[PASS] Muted Mode: Output is zero.

Test: Gyroscopic Damping (v0.4.17)
[PASS] Gyro force opposes steering movement (negative: -22.9871)
[PASS] Gyro force is non-zero (magnitude: 22.9871)
[PASS] Gyro force reverses with steering direction (positive: 0.56066)
[PASS] Gyro force scales with speed (slow: -2.24534 vs fast: -22.9871)

Test: Yaw Acceleration Smoothing (v0.4.18)
[WARNING] Invalid DeltaTime (<=0). Using default 0.0025s.
[PASS] First frame smoothed to 10% of raw input (-0.25 ~= -0.25).
[PASS] Second frame accumulated correctly (-0.475 ~= -0.475).
[WARNING] Invalid DeltaTime (<=0). Using default 0.0025s.
[PASS] High-frequency noise rejected (max force 0 < 0.5).

Test: Yaw Acceleration Convergence (v0.4.18)
[WARNING] Invalid DeltaTime (<=0). Using default 0.0025s.
[WARNING] Missing Tire Load. Using Approximation.
[WARNING] Missing Grip. Using Approx based on Slip Angle.
[WARNING] Missing Grip. Using Approx based on Slip Angle.
[PASS] Converged to steady-state after 50 frames (-0.248712 ~= -0.25).
[PASS] Smoothly decaying after step change (-0.22384).

Test: Regression - Yaw/Slide Feedback Loop (v0.4.18)
[WARNING] Missing Grip. Using Approx based on Slip Angle.
[WARNING] Missing Grip. Using Approx based on Slip Angle.
[PASS] No feedback loop detected (max force 0 < 1.0).
[PASS] Average force remains low (avg 0 < 0.5).
[PASS] System settled after noise removed (final force 0).

Test: Yaw Kick Signal Conditioning (v0.4.42)
  Case 1: Idle Noise (YawAccel = 0.1, below threshold)
[PASS] Idle noise filtered (force = 0 ~= 0.0).
  Case 2: Low Speed (YawAccel = 5.0, Speed = 1.0 m/s)
[PASS] Low speed cutoff active (force = 0 ~= 0.0).
  Case 3: Valid Kick (YawAccel = 5.0, Speed = 20.0 m/s)
[FAIL] Valid kick not detected correctly. Got -0.416667 Expected ~-0.125.

Test: Coordinate System - SoP Inversion (v0.4.19)
[PASS] SoP pulls LEFT in right turn (force: 1)
[PASS] SoP pulls RIGHT in left turn (force: -1)

Test: Coordinate System - Rear Torque Inversion (v0.4.19)
[WARNING] Missing Tire Load. Using Approximation.
[WARNING] Missing Grip. Using Approx based on Slip Angle.
[PASS] Rear torque provides counter-steer LEFT (force: -0.3)
[PASS] Rear torque provides counter-steer RIGHT (force: 0.3)

Test: Coordinate System - Scrub Drag Direction (v0.4.19/v0.4.20)
[PASS] Scrub drag opposes left slide (Torque Left: -0.25)
[PASS] Scrub drag opposes right slide (Torque Right: 0.25)

Test: Coordinate System - Debug Slip Angle Sign (v0.4.19)
[PASS] Front slip angle is POSITIVE for left slide (0.244979 rad)
[PASS] Front slip angle is NEGATIVE for right slide (-0.244979 rad)
[PASS] Rear slip angle is POSITIVE for left slide (0.244979 rad)
[PASS] Rear slip angle is NEGATIVE for right slide (-0.244979 rad)

Test: Regression - No Positive Feedback Loop (v0.4.19)
[WARNING] Missing Tire Load. Using Approximation.
[WARNING] Missing Grip. Using Approx based on Slip Angle.
[PASS] Combined forces are stabilizing (net left pull: 1)
[PASS] SoP component is Positive (10)
[PASS] Rear torque is Positive (6)
[PASS] Scrub drag is Positive (5)
\nTest: Coordinate System - All Effects Alignment (Snap Oversteer)
[PASS] Effects Component Check Passed.

Test: Regression - Phase Explosion (All Oscillators)
[WARNING] Missing Grip. Using Approx based on Slip Angle.
[WARNING] Missing Grip. Using Approx based on Slip Angle.
[PASS] All oscillator phases wrapped correctly during stutter.

Test: Time Corrected Smoothing (v0.4.37)
Fast Yaw (400Hz): 0 Slow Yaw (50Hz): 0
[PASS] Smoothing is consistent across frame rates.

Test: Gyro Stability (Clamp Check)
[PASS] Gyro stable with negative smoothing.

Test: Chassis Inertia Smoothing Convergence (v0.4.39)
[PASS] Smoothing converged (X: 9.79971, Z: 9.79971)
[PASS] Smoothing decayed correctly (X: 0.0102785, Z: 0.0102785)

Test: Kinematic Load Cornering (Lateral Transfer v0.4.39)
[WARNING] Missing Tire Load. Using Approximation.
[WARNING] Missing Grip. Using Approx based on Slip Angle.
[WARNING] Missing Grip. Using Approx based on Slip Angle.
[PASS] Left wheel has more load in right turn (FL: 3827.97N, FR: 1427.97N)
[PASS] Lateral transfer magnitude reasonable (2400N)
[PASS] Right wheel has more load in left turn (FR: 3827.97N, FL: 1427.97N)

Test: Notch Filter Attenuation (v0.4.41)
[PASS] Notch Filter attenuated target frequency (Max Amp: 0.0025723)
[PASS] Notch Filter passed off-target frequency (Max Amp: 0.997725)

Test: Frequency Estimator (v0.4.41)
[PASS] Frequency Estimator converged to 19.6715 Hz (Target: 20)

Test: Static Notch Integration (v0.4.43)
[WARNING] Missing Grip. Using Approx based on Slip Angle.
[WARNING] Missing Grip. Using Approx based on Slip Angle.
[PASS] Static Notch attenuated 50Hz signal (Max Amp: 0.00016862)
[PASS] Static Notch passed 10Hz signal (Max Amp: 0.816849)

Test: FFB Signal Gain Compensation (Decoupling)
[WARNING] Missing Grip. Using Approx based on Slip Angle.
[WARNING] Missing Grip. Using Approx based on Slip Angle.
[WARNING] Missing Grip. Using Approx based on Slip Angle.
[WARNING] Missing Grip. Using Approx based on Slip Angle.
[PASS] Rear Align Torque correctly compensated (0 == 0)
[WARNING] Missing Grip. Using Approx based on Slip Angle.
[WARNING] Missing Grip. Using Approx based on Slip Angle.
[WARNING] Missing Grip. Using Approx based on Slip Angle.
[WARNING] Missing Grip. Using Approx based on Slip Angle.
[PASS] Slide Texture correctly compensated (0 == 0)
[WARNING] Missing Grip. Using Approx based on Slip Angle.
[FAIL] Understeer Modifier behavior unexpected! 20Nm: 0.08 40Nm: 0.072
[SUMMARY] Gain Compensation verified for all effect types.

Test: Config Safety Clamping (v0.4.50)
[Config] Loaded from tmp_unsafe_config_test.ini
[PASS] All legacy high-gain values correctly clamped to safe maximums.

Test: Grip Threshold Sensitivity (v0.5.7)
[WARNING] Missing Grip. Using Approx based on Slip Angle.
[WARNING] Missing Grip. Using Approx based on Slip Angle.
[PASS] Sensitive car (0.06) lost more grip at 0.07 slip than GT3 car (0.12).

Test: Steering Shaft Smoothing (v0.5.7)
[PASS] Shaft Smoothing delayed the step input (Frame 1: 0.166667).
[PASS] Shaft Smoothing converged correctly (Frame 11: 0.865412).

Test: Config Defaults (v0.5.7)
[PASS] 'Always on Top' is ENABLED by default.

Test: Config Safety Validation (v0.5.7)
.\build\tests\Release\run_tes
ts.exe : [Config] Invalid 
optimal_slip_angle (0), 
resetting to default 0.10
At line:1 char:1
+ .\build\tests\Release\run_t
ests.exe > test_output_2.txt 
2>&1; Get-Con ...
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
~~~~
    + CategoryInfo           
   : NotSpecified: ([Config  
  ] Invali...to default 0.   
 10:String) [], RemoteExc    
eption
    + FullyQualifiedErrorId  
   : NativeCommandError
 
[Config] Invalid 
optimal_slip_ratio (0), 
resetting to default 0.12
[Config] Loaded from tmp_invalid_grip_config_test.ini
[PASS] Invalid optimal_slip_angle (0.0) reset to safe default (0.10).
[PASS] Invalid optimal_slip_ratio (0.0) reset to safe default (0.12).
[PASS] Valid config values still loaded correctly (gain=1.5).
[Config] Invalid 
optimal_slip_angle (0.005), 
resetting to default 0.10
[Config] Invalid 
optimal_slip_ratio (0.008), 
resetting to default 0.12
[Config] Loaded from tmp_invalid_grip_config_test.ini
[PASS] Very small values (<0.01) correctly reset to defaults.
[SUMMARY] All division-by-zero protections working correctly.

Test: Rear Lockup Differentiation
[PASS] Front lockup triggered. Phase delta: 2.51327
[PASS] Rear lockup triggered. Phase delta: 0.753982
[FAIL] Frequency differentiation failed. Ratio: 0.3

----------------
Tests Passed: 129
Tests Failed: 27
