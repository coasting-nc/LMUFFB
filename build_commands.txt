# Prerequisites

Enable run scripts in powershell:
Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser


Write build files (windows)
& 'C:\Program Files\Microsoft Visual Studio\2022\Community\Common7\Tools\Launch-VsDevShell.ps1' -Arch amd64 -SkipAutomaticLocation; cmake -B build

# Install ImGui
## Dear ImGui (Optional): Download from GitHub and place in vendor/imgui to enable the GUI.

New-Item -ItemType Directory -Path "vendor\imgui" -Force
Invoke-WebRequest -Uri "https://github.com/ocornut/imgui/archive/refs/heads/master.zip" -OutFile "vendor\imgui-master.zip"
Expand-Archive -Path "vendor\imgui-master.zip" -DestinationPath "vendor" -Force
Copy-Item -Path "vendor\imgui-master\*" -Destination "vendor\imgui\" -Recurse -Force
Test-Path "vendor\imgui\imgui.cpp"
Remove-Item -Path "vendor\imgui-master.zip", "vendor\imgui-master" -Recurse -Force

& 'C:\Program Files\Microsoft Visual Studio\2022\Community\Common7\Tools\Launch-VsDevShell.ps1' -Arch amd64 -SkipAutomaticLocation; cmake -B build

# Actual build

Update version number
& 'C:\Program Files\Microsoft Visual Studio\2022\Community\Common7\Tools\Launch-VsDevShell.ps1' -Arch amd64 -SkipAutomaticLocation; cmake -S . -B build

Build release (Windows)
& 'C:\Program Files\Microsoft Visual Studio\2022\Community\Common7\Tools\Launch-VsDevShell.ps1' -Arch amd64 -SkipAutomaticLocation; cmake --build build --config Release

Clean re-build release (Windows)
& 'C:\Program Files\Microsoft Visual Studio\2022\Community\Common7\Tools\Launch-VsDevShell.ps1' -Arch amd64 -SkipAutomaticLocation; cmake --build build --config Release --clean-first


To run the tests:

First compile the test directly:

& 'C:\Program Files\Microsoft Visual Studio\2022\Community\Common7\Tools\Launch-VsDevShell.ps1' -Arch amd64 -SkipAutomaticLocation; cl /EHsc /std:c++17 /I.. tests\test_ffb_engine.cpp src\Config.cpp /Fe:tests\test_ffb_engine.exe


Then run it (choose one option):

# Option 1: Display on console AND save to file (RECOMMENDED)
tests\test_ffb_engine.exe 2>&1 | Tee-Object -FilePath test_results.txt

# Option 2: Only display on console (may truncate if output is long)
tests\test_ffb_engine.exe

# Option 3: Only save to file (no console output)
tests\test_ffb_engine.exe > test_results.txt 2>&1
Get-Content test_results.txt

# Option 4: Just show the summary
tests\test_ffb_engine.exe 2>&1 | Select-String -Pattern "Tests (Passed|Failed):"